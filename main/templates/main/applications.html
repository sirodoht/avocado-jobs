{% extends 'main/layout.html' %}

{% load static %}

{% block content %}
    <div class="container-content-add" id="header-add">
        <div class="container-content-add-content">
            <div class="container-content-add-content-title">
                Add new job application
            </div>
            <div class="container-content-add-content-body">
                <div class="container-content-add-content-body-row">
                    <input type="text" name="role" id="add-role" placeholder="Frontend Developer">
                    <span>at</span>
                    <input type="text" name="company" id="add-company" placeholder="Avocado Jobs, Inc.">
                </div>
                <div class="container-content-add-content-body-row">
                    <input type="text" name="salary" id="add-salary" placeholder="$100k">
                    <select name="stage" id="add-stage">
                        <option value="initial">No initial response yet</option>
                        <option value="need">I need to respond</option>
                        <option value="await">Awaiting response</option>
                        <option value="scheduled">Interview scheduled</option>
                        <option value="offer">Got offer</option>
                        <option value="declined">Declined</option>
                        <option value="rejected">Got Rejected</option>
                    </select>
                </div>
                <div class="container-content-add-content-body-row">
                    <input type="text" name="link" id="add-link" placeholder="https://careers.avocadojobs.com/frontend-dev-8dbgf8">
                </div>
                <div class="container-content-add-content-body-row">
                    <button class="btn-negative" onclick="addApplication()">Save</button>
                </div>
            </div>
        </div>
    </div>

    <div class="container-content-header" id="header-normal">
        <div class="container-content-header-content">
            <h1>Keep track of your job applications</h1>
        </div>
    </div>

    <div class="container-content-body">
        <div class="listings">
            {% if user.is_authenticated %}
                {% csrf_token %}
            {% endif %}
            {% for application in applications_list %}
                <div class="listings-entry">
                    <div class="listings-entry-detail">
                        <div class="listings-entry-detail-info">
                            <a class="listings-entry-detail-info-title" href="{{ application.url }">
                                <strong>{{ application.role_title }}</strong>
                                <span class="muted">at</span>
                                <span class="listings-entry-detail-info-title-company">{{ application.company_name }}</span>
                                <span class="listings-entry-detail-info-title-salary">{{ application.salary }}</span>
                            </a>
                            <div class="listings-entry-detail-info-stage" data-id="{{ application.id }}">
                                <select name="stage" class="submission-stage">
                                    <option {% if application.stage == 'INITIAL' %}selected{% endif %} value="initial">No initial response yet</option>
                                    <option {% if application.stage == 'NEED' %}selected{% endif %} value="need">I need to respond</option>
                                    <option {% if application.stage == 'AWAIT' %}selected{% endif %} value="await">Awaiting response</option>
                                    <option {% if application.stage == 'SCHEDULED' %}selected{% endif %} value="scheduled">Interview scheduled</option>
                                    <option {% if application.stage == 'OFFER' %}selected{% endif %} value="offer">Got offer</option>
                                    <option {% if application.stage == 'DECLINED' %}selected{% endif %} value="declined">Declined</option>
                                    <option {% if application.stage == 'REJECTED' %}selected{% endif %} value="rejected">Got Rejected</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="listings-entry-control">
                        <div class="listings-entry-control-rm" title="Remove listing from applications" data-id="{{ application.id }}" onclick="removeApplication(event)">x</div>
                    </div>
                </div>
            {% empty %}
                {% if user.is_authenticated %}
                    <div class="empty">
                        There are no job applications.
                        <br>
                        You can add a new one by click clicking the button at the top.
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        {% if not user.is_authenticated %}
            <div class="reset">
                <div class="reset-content" title="Reset demo data to their initial values" onclick="resetApplications()">Reset demo data</div>
            </div>
        {% endif %}
    </div>
{% endblock %}
